Global:
    cache_root: C:/Cache
    SF_raw: C:/pamdata_mount/afsc-1/bottom_mounted
    #SF_foc: T:/DecimatedWaves
    #querying on 2019 matlab machine, needs raw path w/o 'Waves'
    #SF_raw: //161.55.120.117/NMML_AcousticsData/Audio_Data
    #SF_foc: //161.55.120.117/NMML_AcousticsData/Audio_Data/DecimatedWaves
    SF_temp: ../temp
    #raven doesn't let you use relative path lol
    SF_foc: C:/Users/pam_user/INSTINCT/temp/decimated_temp
    Wrapper: False
    #set both of below for INSTINCT job to automatically export outputs to gcs
    GCS_output: True
    GCS_path: gs://pam-ww-tmp/Daniel_Woodrich/dk_check
    parameters:
        queryfg:
           > "SELECT data_collection.name AS dname,soundfiles.name,soundfiles.datetime,soundfiles.duration,bins.* FROM bins JOIN soundfiles ON bins.soundfiles_id = soundfiles.id JOIN data_collection ON soundfiles.data_collection_id = data_collection.id WHERE type=2 AND (data_collection.name, soundfiles.datetime::date) IN (('AL16_AU_CC02','2017-01-14'::date), ('AL16_AU_CC02','2017-01-15'::date), ('AL16_AU_CC02','2017-01-16'::date), ('AL16_AU_CC02','2017-01-17'::date), ('AL16_AU_CC02','2017-01-18'::date), ('AL16_AU_CC02','2017-01-19'::date), ('AL16_AU_CC02','2017-01-21'::date), ('AL16_AU_CC02','2017-01-28'::date), ('AL16_AU_CC02','2017-01-30'::date), ('AL16_AU_CC02','2017-01-31'::date), ('AL16_AU_CC02','2017-02-01'::date), ('AL16_AU_CC02','2017-02-02'::date), ('AL16_AU_CC02','2017-02-03'::date), ('AL16_AU_CC02','2017-02-06'::date), ('AL16_AU_CC02','2017-02-11'::date), ('AL16_AU_CC02','2017-02-27'::date), ('AL16_AU_CC02','2017-03-03'::date), ('AL16_AU_CC02','2017-03-10'::date), ('AL16_AU_CC02','2017-03-11'::date), ('AL16_AU_CC02','2017-03-12'::date), ('AL16_AU_CC02','2017-03-15'::date), ('AL16_AU_CC02','2017-03-18'::date), ('AL16_AU_CC02','2017-03-21'::date), ('AL16_AU_CC02','2017-03-23'::date), ('AL16_AU_CC02','2017-03-27'::date), ('AL16_AU_CC02','2017-03-28'::date), ('AL16_AU_CC02','2017-03-29'::date), ('AL16_AU_CC02','2017-03-31'::date), ('AL16_AU_CC02','2017-04-01'::date), ('AL16_AU_CC02','2017-04-02'::date), ('AL16_AU_CC02','2017-04-04'::date), ('AL16_AU_CC02','2017-04-07'::date), ('AL16_AU_CC02','2017-04-10'::date), ('AL16_AU_CC02','2017-04-11'::date), ('AL16_AU_CC02','2017-04-12'::date), ('AL16_AU_CC02','2017-04-13'::date), ('AL16_AU_CC02','2017-04-14'::date), ('AL16_AU_CC02','2017-04-17'::date), ('AL16_AU_CC02','2017-04-19'::date), ('AL16_AU_CC02','2017-04-20'::date), ('AL16_AU_CC02','2017-04-21'::date), ('AL16_AU_CC02','2017-04-27'::date), ('AL16_AU_CC02','2017-04-28'::date), ('AL16_AU_CC02','2017-05-06'::date), ('AL16_AU_IC03','2016-12-31'::date), ('AL16_AU_IC03','2017-01-06'::date), ('AL16_AU_IC03','2017-01-07'::date), ('AL16_AU_IC03','2017-01-08'::date), ('AL16_AU_IC03','2017-01-09'::date), ('AL16_AU_IC03','2017-01-10'::date), ('AL16_AU_IC03','2017-01-11'::date), ('AL16_AU_IC03','2017-01-12'::date), ('AL16_AU_IC03','2017-01-13'::date), ('AL16_AU_IC03','2017-01-15'::date), ('AL16_AU_IC03','2017-01-16'::date), ('AL16_AU_IC03','2017-01-21'::date), ('AL16_AU_IC03','2017-01-22'::date), ('AL16_AU_IC03','2017-01-24'::date), ('AL16_AU_IC03','2017-01-26'::date), ('AL16_AU_IC03','2017-01-30'::date), ('AL16_AU_IC03','2017-01-31'::date), ('AL16_AU_IC03','2017-02-04'::date), ('AL16_AU_IC03','2017-02-06'::date), ('AL16_AU_IC03','2017-02-07'::date), ('AL16_AU_IC03','2017-02-12'::date), ('AL16_AU_IC03','2017-02-14'::date), ('AL16_AU_IC03','2017-02-16'::date), ('AL16_AU_IC03','2017-02-18'::date), ('AL16_AU_IC03','2017-02-22'::date), ('AL16_AU_IC03','2017-03-09'::date), ('AL16_AU_IC03','2017-03-10'::date), ('AL16_AU_IC03','2017-03-11'::date), ('AL16_AU_IC03','2017-03-19'::date), ('AL16_AU_IC03','2017-03-20'::date), ('AL16_AU_IC03','2017-04-04'::date), ('AL16_AU_IC03','2017-04-05'::date), ('AL16_AU_IC03','2017-04-10'::date), ('AL16_AU_IC03','2017-04-17'::date), ('AL16_AU_IC03','2017-04-19'::date), ('AL16_AU_IC03','2017-04-21'::date), ('AL16_AU_IC03','2017-04-22'::date), ('AL16_AU_IC03','2017-04-23'::date), ('AL16_AU_IC03','2017-04-24'::date), ('AL16_AU_IC03','2017-04-29'::date), ('AL16_AU_IC03','2017-04-30'::date), ('AL16_AU_IC03','2017-05-03'::date), ('AL16_AU_IC03','2017-05-04'::date), ('AL16_AU_IC03','2017-05-05'::date), ('AL16_AU_IC03','2017-05-06'::date), ('AL16_AU_IC03','2017-05-07'::date), ('AL16_AU_IC03','2017-05-08'::date), ('AL16_AU_IC03','2017-05-09'::date), ('AL16_AU_IC03','2017-05-10'::date), ('AL16_AU_IC03','2017-05-11'::date), ('AL16_AU_IC03','2017-05-13'::date), ('AL16_AU_IC03','2017-05-14'::date), ('AL16_AU_IC03','2017-05-16'::date), ('AL16_AU_IC03','2017-05-18'::date), ('AL16_AU_IC03','2017-05-21'::date), ('AL16_AU_IC03','2017-05-22'::date), ('AL16_AU_PH01','2017-01-22'::date), ('AL16_AU_PH01','2017-01-24'::date), ('AL16_AU_PH01','2017-01-26'::date), ('AL16_AU_PH01','2017-01-27'::date), ('AL16_AU_PH01','2017-01-30'::date), ('AL16_AU_PH01','2017-01-31'::date), ('AL16_AU_PH01','2017-02-01'::date), ('AL16_AU_PH01','2017-02-02'::date), ('AL16_AU_PH01','2017-02-03'::date), ('AL16_AU_PH01','2017-02-04'::date), ('AL16_AU_PH01','2017-02-05'::date), ('AL16_AU_PH01','2017-02-06'::date), ('AL16_AU_PH01','2017-02-07'::date), ('AL16_AU_PH01','2017-02-08'::date), ('AL16_AU_PH01','2017-02-09'::date), ('AL16_AU_PH01','2017-02-10'::date), ('AL16_AU_PH01','2017-02-11'::date), ('AL16_AU_PH01','2017-02-13'::date), ('AL16_AU_PH01','2017-02-14'::date), ('AL16_AU_PH01','2017-02-15'::date), ('AL16_AU_PH01','2017-02-17'::date), ('AL16_AU_PH01','2017-02-21'::date), ('AL16_AU_PH01','2017-02-23'::date), ('AL16_AU_PH01','2017-02-25'::date), ('AL16_AU_PH01','2017-02-27'::date), ('AL16_AU_PH01','2017-02-28'::date), ('AL16_AU_PH01','2017-03-07'::date), ('AL16_AU_PH01','2017-03-11'::date), ('AL16_AU_PH01','2017-03-12'::date), ('AL16_AU_PH01','2017-03-13'::date), ('AL16_AU_PH01','2017-03-16'::date), ('AL16_AU_PH01','2017-03-19'::date), ('AL16_AU_PH01','2017-03-25'::date), ('AL16_AU_PH01','2017-03-29'::date), ('AL16_AU_PH01','2017-04-05'::date), ('AL16_AU_PH01','2017-04-08'::date), ('AL16_AU_PH01','2017-04-11'::date), ('AL16_AU_PH01','2017-04-13'::date), ('AL16_AU_PH01','2017-04-15'::date), ('AL16_AU_PH01','2017-04-16'::date), ('AL16_AU_PH01','2017-04-17'::date), ('AL16_AU_PH01','2017-04-18'::date), ('AL16_AU_PH01','2017-04-20'::date), ('AL16_AU_PH01','2017-04-21'::date), ('AL16_AU_PH01','2017-04-22'::date), ('AL16_AU_PH01','2017-04-23'::date), ('AL16_AU_PH01','2017-04-24'::date), ('AL16_AU_PH01','2017-04-28'::date), ('AL16_AU_PH01','2017-04-29'::date), ('AL16_AU_PH01','2017-04-30'::date), ('AL16_AU_PH01','2017-05-16'::date), ('AL16_AU_PH01','2017-05-19'::date), ('AL19_AU_IC01','2020-01-19'::date), ('AL19_AU_IC01','2020-01-20'::date), ('AL19_AU_IC01','2020-01-22'::date), ('AL19_AU_IC01','2020-01-24'::date), ('AL19_AU_IC01','2020-01-25'::date), ('AL19_AU_IC01','2020-01-30'::date), ('AL19_AU_IC01','2020-02-02'::date), ('AL19_AU_IC01','2020-02-03'::date), ('AL19_AU_IC01','2020-02-04'::date), ('AL19_AU_IC01','2020-02-06'::date), ('AL19_AU_IC01','2020-02-09'::date), ('AL19_AU_IC01','2020-02-10'::date), ('AL19_AU_IC01','2020-02-11'::date), ('AL19_AU_IC01','2020-02-12'::date), ('AL19_AU_IC01','2020-02-13'::date), ('AL19_AU_IC01','2020-02-14'::date), ('AL19_AU_IC01','2020-02-15'::date), ('AL19_AU_IC01','2020-02-20'::date), ('AL19_AU_IC01','2020-02-21'::date), ('AL19_AU_IC01','2020-02-22'::date), ('AL19_AU_IC01','2020-02-23'::date), ('AL19_AU_IC01','2020-02-27'::date), ('AL19_AU_IC01','2020-02-28'::date), ('AL19_AU_IC01','2020-03-08'::date), ('AL19_AU_IC01','2020-03-10'::date), ('AL19_AU_IC01','2020-03-11'::date), ('AL19_AU_IC01','2020-03-17'::date), ('AL19_AU_IC01','2020-04-04'::date), ('AL19_AU_IC01','2020-04-05'::date), ('AL19_AU_IC01','2020-04-11'::date), ('AL19_AU_IC01','2020-04-13'::date), ('AL19_AU_IC01','2020-04-14'::date), ('AL19_AU_IC01','2020-04-18'::date), ('AL19_AU_IC01','2020-04-21'::date), ('AL19_AU_IC01','2020-04-22'::date), ('AL19_AU_IC01','2020-04-23'::date), ('AL19_AU_IC01','2020-04-24'::date), ('AL19_AU_IC01','2020-04-26'::date), ('AL19_AU_IC01','2020-04-27'::date), ('AL19_AU_IC01','2020-04-28'::date), ('AL19_AU_IC01','2020-05-02'::date), ('AL19_AU_IC01','2020-05-05'::date), ('AL19_AU_IC01','2020-05-10'::date), ('AL19_AU_IC01','2020-05-13'::date))"
        qfg_XA22_ST_KS01_1: 
           > "SELECT data_collection.name AS dname,soundfiles.name,soundfiles.datetime,soundfiles.duration,bins.* FROM bins JOIN soundfiles ON bins.soundfiles_id = soundfiles.id JOIN data_collection ON soundfiles.data_collection_id = data_collection.id WHERE type=2 AND data_collection.name = 'XA22_ST_KS01' AND soundfiles.datetime < '2022-11-23'::date AND soundfiles.datetime > '2022-11-18'::date" 
        querygt:
           > "SELECT DISTINCT detections.id,detections.start_time,detections.end_time,detections.low_freq,LEAST(detections.high_freq,4096),detections.start_file,detections.end_file,detections.probability,detections.comments,detections.procedure,detections.label,detections.signal_code,detections.strength,detections.modified,detections.analyst,detections.status,detections.original_id,detections.date_created FROM detections WHERE detections.status = 1 
           > AND detections.signal_code = 15 AND detections.start_file IN {FG}"
Job:
    FormatFG:
        parameters:
            decimate_data: y
            difftime_limit: 3600
            methodID: pampgdb-standard-pullfg
            methodvers: v1-3
            #methodID: makara-query
            #methodvers: v1-0
            methodID2m: matlabdecimate
            methodvers2m: V1s1
            target_samp_rate: 8192
            #storage_service: gcp
            file_groupID:
              #- [queryfg]
              - [qfg_XA22_ST_KS01_1]
        arguments:
            hard_rerun: n
            prestage_data: n
            parallel_matlab: 3
        descriptors:
            runtype: lib
            language: R
            runtype2m: bin
            language2m: MATLAB
    FormatGT:
        parameters:
            methodID: pampgdb-standard-pullgt
            methodvers: v1-4
            query: [querygt]
            remove_proc_ovlp: n
            standardize_sig_code: n
        arguments:
            hard_rerun: y
        descriptors:
            runtype: lib
            language: R
    RavenViewDETx:
        parameters:
            methodID: rv-simple-w-metadata
            methodvers: v1-18
        arguments:
            fg_fill: y
            hard_rerun: n
            ignore_decimated: n
            randomize_order: n
            stage_data: n
            stage_prefix: ignored
        descriptors:
            runtype: lib
            language: R
    RavenToDETx:
        parameters:
            methodID: rd-simple-w-metadata
            methodvers: v1-5
        descriptors:
            runtype: lib
            language: R